<!doctype html>
<html class="no-js" lang="">
  <head>
      <meta charset="utf-8">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      <title>Feed Me Please!</title>
      <meta name="description" content="">
      <meta name="viewport" content="width=device-width, initial-scale=1">

      <link rel="manifest" href="site.webmanifest">
      <link rel="apple-touch-icon" href="icon.png">
      <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
      <link rel="icon" href="favicon.ico" type="image/x-icon">

      <link rel="stylesheet" href="css/normalize.css">
      <link rel="stylesheet" href="css/main.css">
      <link rel="stylesheet" href="css/store.css">
      <link rel="stylesheet" href="css/home.css">
      <link href="https://fonts.googleapis.com/css?family=Raleway|Montserrat|Open+Sans|Poiret+One|Source+Sans+Pro" rel="stylesheet">
  </head>
  <body>

<div class="sidebar-home-wrapper">
      <aside>
        <p> Welcome home! </p>
        <br>
        <p> Oh your cat is hungry. Do something. </p>

        <nav id="sidebar">
          <button id="open-store">Click here to buy food</button>

          <section id="my-bag-container">
            <div class="cart-heading">
              <img id="bag-image" src="https://res.cloudinary.com/devleg/image/upload/v1524012342/if_bag_286731.png">
              <h2>My bag</h2>
            </div>

            <div id="items-in-bag">
              <p id="empty-bag-warning">Your bag is empty.<p>
            </div>

            <div>
              <button type="button" onclick="feed()">Feed</button>
            </div>
          </section>
        </nav>

      </aside>

      <section id="home">
        <img draggable="true" src="https://res.cloudinary.com/devleg/image/upload/v1523854992/if_cat_hungry_185523.png" class="cat initial-position" id="tabby">


      </section>
      </div>

      <footer>
        <div class="container">
          <p>Feed Me Please!  &copy; 2018</p>
        </div>
      </footer>

      <div id="modal">
        <form class="modal-form">
          <span class="modal-close js-modal-close">&times;</span>

          <div id="store-wrapper">
            <div id="items-container">
            <header>
              <div class="container">
                <div class="heading">
                  <img src="http://res.cloudinary.com/devleg/image/upload/v1523870399/fireworks.png">
                  <img src="http://res.cloudinary.com/devleg/image/upload/v1523870399/decoration_line.png">
                  <h1>The Best Store In Town</h1>
                  <img src="http://res.cloudinary.com/devleg/image/upload/v1523870399/decoration_line.png">
                  <img src="http://res.cloudinary.com/devleg/image/upload/v1523870399/fireworks.png">
                </div>
                <nav id="navbar">
                  <p>Welcome! Please drag food to cart, and click "Buy" to purchase food. </p>
                </nav>
              </div>
            </header>

            <section id="main">
              <div class="container foods">
                <ul id="gallery">
                  <li class="item"><img draggable="true" class="box good" id="cat food" src="http://res.cloudinary.com/devleg/image/upload/v1523865974/canned_goods.png">Cat Food</li>
                  <li class="item"><img draggable="true" class="box bad" id="fish bone" src="http://res.cloudinary.com/devleg/image/upload/v1523865973/fishbone.png">Fish Bone</li>
                  <li class="item"><img draggable="true" class="box good" id="lean beef" src="http://res.cloudinary.com/devleg/image/upload/v1523865975/steak.png">Lean Beef</li>
                  <li class="item"><img draggable="true" class="box bad" id="salted chicken" src="http://res.cloudinary.com/devleg/image/upload/v1523865974/chicken.png">Salted Chicken</li>
                  <li class="item"><img draggable="true" class="box bad" id="grape" src="http://res.cloudinary.com/devleg/image/upload/v1523866795/grape.png">Grape</li>
                  <li class="item"><img draggable="true" class="box ok" id="strawberry" src="http://res.cloudinary.com/devleg/image/upload/v1523866795/strawberry.png">Strawberry</li>
                  <li class="item"><img draggable="true" class="box ok" id="banana" src="http://res.cloudinary.com/devleg/image/upload/v1523866794/banana.png">Banana</li>
                  <li class="item"><img draggable="true" class="box bad" id="alcohol" src="http://res.cloudinary.com/devleg/image/upload/v1523866257/alcohol.png">Alcohol</li>
                  <li class="item"><img draggable="true" class="box bad" id="milk" src="http://res.cloudinary.com/devleg/image/upload/v1523865974/milk.png">Milk</li>
                  <li class="item"><img draggable="true" class="box walk" id="orange juice" src="http://res.cloudinary.com/devleg/image/upload/v1523866803/juice.png">Orange Juice</li>
                  <li class="item"><img draggable="true" class="box bad" id="cheese" src="http://res.cloudinary.com/devleg/image/upload/v1523865974/cheese.png">Cheese</li>
                  <li class="item"><img draggable="true" class="box good" id="mint" src="http://res.cloudinary.com/devleg/image/upload/v1523865974/mint.png">Mint</li>
                  <li class="item"><img draggable="true" class="box bad" id="cake" src="http://res.cloudinary.com/devleg/image/upload/v1523866795/cake.png">Cake</li>
                  <li class="item"><img draggable="true" class="box bad" id="onion" src="http://res.cloudinary.com/devleg/image/upload/v1523866795/onion.png">Onion</li>
                  <li class="item"><img draggable="true" class="box bad" id="raw fish" src="http://res.cloudinary.com/devleg/image/upload/v1523867263/rawfish.png">Raw Fish</li>
                  <li class="item"><img draggable="true" class="box bad" id="raisin" src="http://res.cloudinary.com/devleg/image/upload/v1523867263/raisin.png">Raisin</li>
                  <li class="item"><img draggable="true" class="box bad" id="chocolate" src="http://res.cloudinary.com/devleg/image/upload/v1523867750/chocolate.png">Chocolate</li>
                </ul>
              </div>
            </section><!-- end of #main-->
            </div>

            <aside id="shopping-cart-container">
              <div class="cart-heading">
                <img src="https://res.cloudinary.com/devleg/image/upload/v1523923302/if_shopping_cart_286726.png">
                <h2>Shopping Cart</h2>
              </div>

              <div id="items-in-cart">
                <div class="cart-item"></div>
                <div class="cart-item"></div>
                <div class="cart-item"></div>
                <div class="cart-item"></div>
              </div>

              <div>
                <button type="button" onclick="buy()">Buy</button>
                <button type="button" class="js-modal-close go-home">Go Home</button>
              </div>
            </aside>
          </div><!-- end of #store-wrapper-->

        </form>
        <div class="modal-screen js-modal-close"></div>
      </div><!--end of "modal is-open"-->


      <script src="js/vendor/modernizr-3.5.0.min.js"></script>
      <script src="js/home.js"></script>
      <script src="js/store.js"></script>
      <script src="js/cart.js"></script>
      <script>
        // add purchased items to my bag
        function buy() {
          const cartFoods = document.getElementsByClassName('has-food');
          const myBag = document.getElementById("items-in-bag");
          const emptyBag = document.getElementById("empty-bag-warning");
          const cart = document.getElementById("items-in-cart");

          if (cartFoods.length > 0) {
            if (emptyBag !== null) {
              myBag.removeChild(emptyBag);
            }
            for(const cartFood of cartFoods) {
              // add food to bag with container
              cartFood.classList.add("in-bag");
              myBag.appendChild(cartFood);
              cartFood.addEventListener("click", selectItemToFeed);
              // add cart holders back
              const holder = document.createElement("div");
              holder.classList.add("cart-item");
              cart.appendChild(holder);
              // add eventListeners to make new holders drop positions
              holder.addEventListener("dragover", App.dragover);
              holder.addEventListener("dragenter", App.dragenter);
              holder.addEventListener("dragleave", App.dragleave);
              holder.addEventListener("drop", App.drop);
            }
          }

          return false;
        }

        // feed cat
        function selectItemToFeed(e) {
          e.preventDefault();
          const selectedFoods = document.getElementsByClassName("to-feed");
          for(const selectedFood of selectedFoods) {
            selectedFood.classList.remove("to-feed");
          }
          e.currentTarget.classList.add("to-feed");
        }

        function feed() {
          const foodContainer = document.getElementsByClassName("to-feed")[0];
          const myBag = document.getElementById("items-in-bag");
          if (myBag.children[0].id === "empty-bag-warning") {
            alert("There is nothing to feed. Go to the store to buy some?");
          }

          if (foodContainer !== undefined && foodContainer !== null) {
            const food = foodContainer.childNodes[0];
            myBag.removeChild(foodContainer);
            if (food !== undefined && food !== null) {
              eat(food);
            }
            if (myBag.childElementCount === 1) {
              myBag.children[0].innerText = "Your bag is empty.";
              myBag.children[0].id = "empty-bag-warning";
            }
          }
        }

        function eat(food) {
          const tabby = document.getElementById('tabby');
          if (food.classList.contains("good")) {
            tabby.src="https://res.cloudinary.com/devleg/image/upload/v1523854948/meal.gif";
            alert(`Love it! Yummy, ${food.id} is great.`);
          } else if (food.classList.contains("bad")){
            tabby.src="https://res.cloudinary.com/devleg/image/upload/v1523854993/if_cat_pirate_185520.png";
            alert(`Avoid feeding ${food.id} to your cat. Dangerous.`);
          } else if (food.classList.contains("ok")){
            tabby.src="https://res.cloudinary.com/devleg/image/upload/v1523854958/burp.gif";
            alert(`It's OK to feed ${food.id}, but the nutritional value is low for cats.`);
          } else if (food.classList.contains("walk")){
            tabby.src="https://res.cloudinary.com/devleg/image/upload/v1523854939/walk.gif";
            alert("Oops. You cat seems to hate the smell.");
          }
        }

      </script>

  </body>
</html>
