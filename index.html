<!doctype html>
<html class="no-js" lang="">
  <head>
      <meta charset="utf-8">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      <title>Feed Me Please!</title>
      <meta name="description" content="">
      <meta name="viewport" content="width=device-width, initial-scale=1">

      <link rel="manifest" href="site.webmanifest">
      <link rel="apple-touch-icon" href="icon.png">
      <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
      <link rel="icon" href="favicon.ico" type="image/x-icon">

      <link rel="stylesheet" href="css/normalize.css">
      <link rel="stylesheet" href="css/main.css">
      <link rel="stylesheet" href="css/store.css">
      <link rel="stylesheet" href="css/home.css">
      <link href="https://fonts.googleapis.com/css?family=Raleway|Montserrat|Open+Sans|Poiret+One|Source+Sans+Pro" rel="stylesheet">
      <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.10/css/all.css" integrity="sha384-+d0P83n9kaQMCwj8F4RJB66tzIwOKmrdb46+porD/OvrJ+37WqIM7UoBtwHO6Nlg" crossorigin="anonymous">
  </head>
  <body>

    <div id="welcome-modal" class="is-open">
      <div id="welcome-wrapper">
        <p> Welcome home! </p>
        <br>
        <p> Oh your cat is hungry. Do something. </p>
        <br>
        <p id="small"> • You can take your cat anywhere in your home. (Use mouse to drag.)
        <br>
        • After you are both seated, try feeding your cat. (Buy food first!)
        <br>
        • Note: If you refresh page, you'll lose your game process.
        </p>
        <button type="button" class="welcome-modal-close go-home">Got It. Start game.</button>
      </div><!-- end of #welcome-wrapper-->

      <div class="modal-screen welcome-modal-close"></div>
    </div>

    <div class="sidebar-home-wrapper">
      <aside>
        <nav id="sidebar">
          <button id="open-store">Click here to buy food</button>

          <section id="my-bag-container">
            <div class="cart-heading">
              <img id="bag-image" src="https://res.cloudinary.com/devleg/image/upload/v1524012342/if_bag_286731.png">
              <h2>My bag</h2>
            </div>

            <div id="items-in-bag">
              <p id="empty-bag-warning">Your bag is empty.
                <br>
                You need to buy food! <p>
            </div>

            <button type="button" onclick="feed()">Feed</button>

          </section>
        </nav>

      </aside>

      <section id="home">
        <img draggable="true" src="https://res.cloudinary.com/devleg/image/upload/v1523854992/if_cat_hungry_185523.png" class="cat initial-position" id="tabby">


      </section>
      </div>

      <footer>
        <div class="container">
          <a href="https://github.com/stellashen/feed-me-please">
            <i class="fab fa-github-square"></i>
          </a>
          <a href="https://www.linkedin.com/in/yangchenshen/">
            <i class="fab fa-linkedin"></i>
          </a>
          <p>Feed Me Please!  &copy; 2018</p>
        </div>
      </footer>

      <div id="modal">
        <form class="modal-form">
          <span class="modal-close js-modal-close">&times;</span>

          <div id="store-wrapper">
            <div id="items-container">
            <header>
              <div class="container">
                <div class="heading">
                  <img src="http://res.cloudinary.com/devleg/image/upload/v1523870399/fireworks.png">
                  <img src="http://res.cloudinary.com/devleg/image/upload/v1523870399/decoration_line.png">
                  <h1>The Best Store In Town</h1>
                  <img src="http://res.cloudinary.com/devleg/image/upload/v1523870399/decoration_line.png">
                  <img src="http://res.cloudinary.com/devleg/image/upload/v1523870399/fireworks.png">
                </div>
                <nav id="navbar">
                  <p>Welcome! Please drag food to cart, and click "Buy" to purchase food. </p>
                </nav>
              </div>
            </header>

            <section id="main">
              <div class="container foods">
                <ul id="gallery">
                  <li class="item"><img draggable="true" class="box good" id="wet cat food" src="http://res.cloudinary.com/devleg/image/upload/v1523865974/canned_goods.png">Wet Cat Food</li>
                  <li class="item"><img draggable="true" class="box good" id="dry cat food (tuna flavor)" src="https://res.cloudinary.com/devleg/image/upload/v1524200232/if_35_-Cat_Food-_petshop_pet_animal_2084132.png">Dry Cat Food</li>
                  <li class="item"><img draggable="true" class="box good" id="dry cat food (chicken flavor)" src="https://res.cloudinary.com/devleg/image/upload/v1524200232/if_35_-Cat_Food-_petshop_pet_animal_2280566.png">Dry Cat Food</li>
                  <li class="item"><img draggable="true" class="box bad" id="dog food" src="https://res.cloudinary.com/devleg/image/upload/v1524200232/if_6_-Dog_Food-_petshop_pet_animal_2280584.png">Dog Food</li>
                  <li class="item"><img draggable="true" class="box good" id="baby food" src="https://res.cloudinary.com/devleg/image/upload/v1524200232/if_012_029_preserves_food_baby_2514669.png">Baby Food</li>
                  <li class="item"><img draggable="true" class="box bad" id="salted chicken" src="http://res.cloudinary.com/devleg/image/upload/v1523865974/chicken.png">Salted Chicken</li>
                  <li class="item"><img draggable="true" class="box good" id="liver" src="https://res.cloudinary.com/devleg/image/upload/v1524200233/liver.png">Liver</li>
                  <li class="item"><img draggable="true" class="box good" id="turkey" src="https://res.cloudinary.com/devleg/image/upload/v1524200389/if_Christmas_turkey_2747907.png">Turkey</li>
                  <li class="item"><img draggable="true" class="box good" id="deli meat" src="https://res.cloudinary.com/devleg/image/upload/v1524200233/if_Thanksgiving_Essentials-23_2598974.png">Deli Meat</li>
                  <li class="item"><img draggable="true" class="box bad" id="grape" src="http://res.cloudinary.com/devleg/image/upload/v1523866795/grape.png">Grape</li>
                  <li class="item"><img draggable="true" class="box ok" id="strawberry" src="http://res.cloudinary.com/devleg/image/upload/v1523866795/strawberry.png">Strawberry</li>
                  <li class="item"><img draggable="true" class="box ok" id="banana" src="http://res.cloudinary.com/devleg/image/upload/v1523866794/banana.png">Banana</li>
                  <li class="item"><img draggable="true" class="box bad" id="alcohol" src="http://res.cloudinary.com/devleg/image/upload/v1523866257/alcohol.png">Alcohol</li>
                  <li class="item"><img draggable="true" class="box bad" id="milk" src="http://res.cloudinary.com/devleg/image/upload/v1523865974/milk.png">Milk</li>
                  <li class="item"><img draggable="true" class="box walk" id="orange juice" src="http://res.cloudinary.com/devleg/image/upload/v1523866803/juice.png">Orange Juice</li>
                  <li class="item"><img draggable="true" class="box bad" id="cheese" src="http://res.cloudinary.com/devleg/image/upload/v1523865974/cheese.png">Cheese</li>
                  <li class="item"><img draggable="true" class="box good" id="mint" src="http://res.cloudinary.com/devleg/image/upload/v1523865974/mint.png">Mint</li>
                  <li class="item"><img draggable="true" class="box bad" id="onion" src="http://res.cloudinary.com/devleg/image/upload/v1523866795/onion.png">Onion</li>
                  <li class="item"><img draggable="true" class="box bad" id="raw fish" src="http://res.cloudinary.com/devleg/image/upload/v1523867263/rawfish.png">Raw Fish</li>
                  <li class="item"><img draggable="true" class="box good" id="oatmeal" src="https://res.cloudinary.com/devleg/image/upload/v1524200233/oatmeal.png">Oatmeal</li>
                  <li class="item"><img draggable="true" class="box bad" id="mushroom" src="https://res.cloudinary.com/devleg/image/upload/v1524200233/mushroom.png">Mushroom</li>
                  <li class="item"><img draggable="true" class="box good" id="carrot" src="https://res.cloudinary.com/devleg/image/upload/v1524200231/carrot.png">Carrot</li>
                  <li class="item"><img draggable="true" class="box ok" id="blueberry" src="https://res.cloudinary.com/devleg/image/upload/v1524200231/blueberry.png">Blueberry</li>
                  <li class="item"><img draggable="true" class="box bad" id="raisin" src="http://res.cloudinary.com/devleg/image/upload/v1523867263/raisin.png">Raisin</li>
                  <li class="item"><img draggable="true" class="box bad" id="chocolate" src="http://res.cloudinary.com/devleg/image/upload/v1523867750/chocolate.png">Chocolate</li>
                  <li class="item"><img draggable="true" class="box good" id="spinach" src="https://res.cloudinary.com/devleg/image/upload/v1524200234/spinach.png">Spinach</li>
                  <li class="item"><img draggable="true" class="box walk" id="orange" src="https://res.cloudinary.com/devleg/image/upload/v1524200234/orange.png">Orange</li>
                  <li class="item"><img draggable="true" class="box good" id="rice" src="https://res.cloudinary.com/devleg/image/upload/v1524200234/rice.png">Rice</li>
                  <li class="item"><img draggable="true" class="box good" id="peas" src="https://res.cloudinary.com/devleg/image/upload/v1524200233/peas.png">Peas</li>
                  <li class="item"><img draggable="true" class="box walk" id="lemon" src="https://res.cloudinary.com/devleg/image/upload/v1524200233/lemon.png">Lemon</li>
                  <li class="item"><img draggable="true" class="box walk" id="lavendar" src="https://res.cloudinary.com/devleg/image/upload/v1524200232/lavendar.png">Lavendar</li>
                  <li class="item"><img draggable="true" class="box ok" id="salmon" src="https://res.cloudinary.com/devleg/image/upload/v1524200232/if_salmon_921030.png">salmon</li>
                  <li class="item"><img draggable="true" class="box good" id="melon" src="https://res.cloudinary.com/devleg/image/upload/v1524200232/if_melon-slice_2226245.png">Melon</li>
                  <li class="item"><img draggable="true" class="box good" id="cherry" src="https://res.cloudinary.com/devleg/image/upload/v1524200231/cherry.png">Cherry</li>
                  <li class="item"><img draggable="true" class="box good" id="cooked eggs" src="https://res.cloudinary.com/devleg/image/upload/v1524203701/if_Breakfast-06_1522937.png">Cooked eggs</li>
                  <li class="item"><img draggable="true" class="box good" id="brocolli" src="https://res.cloudinary.com/devleg/image/upload/v1524200231/brocolli.png">Brocolli</li>
                </ul>
              </div>
            </section><!-- end of #main-->
            </div>

            <aside id="shopping-cart-container">
              <div class="cart-heading">
                <img src="https://res.cloudinary.com/devleg/image/upload/v1523923302/if_shopping_cart_286726.png">
                <h2>Shopping Cart</h2>
              </div>

              <div id="items-in-cart">
                <div class="cart-item"></div>
                <div class="cart-item"></div>
                <div class="cart-item"></div>
                <div class="cart-item"></div>
              </div>

              <div>
                <button type="button" onclick="buy()">Buy</button>
                <button type="button" class="js-modal-close go-home">Go Home</button>
              </div>
            </aside>
          </div><!-- end of #store-wrapper-->

        </form>
        <div class="modal-screen js-modal-close"></div>
      </div><!--end of "modal is-open"-->


      <script src="js/vendor/modernizr-3.5.0.min.js"></script>
      <script src="js/cat.js"></script>
      <script src="js/store.js"></script>
      <script src="js/cart.js"></script>
      <script>
      // add purchased items to my bag
      function buy() {
        const cartFoods = document.getElementsByClassName('has-food');
        const myBag = document.getElementById("items-in-bag");
        const emptyBag = document.getElementById("empty-bag-warning");
        const cart = document.getElementById("items-in-cart");

        let emptyCart = true;
        for(const pos of cart.children) {
          if (pos.innerHTML.length !== 0) {
            emptyCart = false;
          }
        }
        if (emptyCart) {
          alert("Your cart is empty. Please drag items to your cart first.");
          return;
        }

        if (cartFoods.length > 0) {
          if (emptyBag !== null) {
            myBag.removeChild(emptyBag);
          }
          for(const cartFood of cartFoods) {
            // add food to bag with container
            cartFood.classList.add("in-bag");
            myBag.appendChild(cartFood);
            cartFood.addEventListener("click", selectItemToFeed);
            // add cart holders back
            const holder = document.createElement("div");
            holder.classList.add("cart-item");
            cart.appendChild(holder);
            // add eventListeners to make new holders drop positions
            holder.addEventListener("dragover", App.dragover);
            holder.addEventListener("dragenter", App.dragenter);
            holder.addEventListener("dragleave", App.dragleave);
            holder.addEventListener("drop", App.drop);
          }
          alert("Order complete successfully! You can buy more food, or go home.");
        }
        return false;
      }
      </script>
      <script src="js/home.js"></script>

  </body>
</html>
